(this.webpackJsonplogaze=this.webpackJsonplogaze||[]).push([[0],{203:function(e,t,a){e.exports=a(280)},208:function(e,t,a){},210:function(e,t,a){},280:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),i=a.n(o),l=(a(208),a(40)),c=a(77),s=a.n(c),d=a(142),u=(a(210),a(211),a(65)),h=a(54),m=function(){var e="https://api.jsonbin.io/b/".concat("5dac6fed5751f76337fd4ac2","/latest");return fetch(e).then((function(e){return e.json()}))},f=a(98),p=a.n(f),b=function(){return fetch("https://worldtimeapi.org/api/timezone/Etc/UTC").then((function(e){return p()(e.json().utc_datetime)}))},g="https://api.jsonbin.io/b/".concat("5db0487cdc9e973e1f74ad2b"),y=function(){return fetch(g+"/latest").then((function(e){return e.json()})).then((function(e){return p()(e.lastScraped)}))},w=function(e){var t={lastScraped:e.format()};fetch(g,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})},E=a(63),v=a(200),k=(a(258),a(259),function(e){return r.a.createElement(E.a,{variant:"light",size:"sm",target:"_blank",rel:"noopener noreferrer",href:e},"Buy")}),j=function(e){return function(t){return t.toFixed(e)}},N=function(e){return function(t){var a=t.value;return null===a?a:e(a)}},S=function(e){return function(t){return"$".concat(e(t))}},O=function(e){var t=e.data,a={columnDefs:[{headerName:"USD",field:"url",width:65,cellRendererFramework:N(k)},{headerName:"Price",field:"price",width:70,cellRenderer:N(S(j(2))),filter:"agNumberColumnFilter",sort:"asc"},{headerName:"Type",field:"product-type",width:70},{headerName:"Model",field:"model"},{headerName:"Screen Size",field:"screen-size",width:70,cellRenderer:N(j(1)),filter:"agNumberColumnFilter"},{headerName:"Resolution",field:"resolution",width:100},{headerName:"IPS Screen?",field:"screen-has-ips",width:70},{headerName:"Display",field:"display-type"},{headerName:"Memory Size",field:"memory-size",width:70},{headerName:"Hard Drive Type",field:"hard-drive-type",width:70},{headerName:"Hard Drive Size",field:"hard-drive-size",width:70},{headerName:"Processor Brand",field:"processor-brand",width:70},{headerName:"Processor Range",field:"processor-range",width:80},{headerName:"Processor",field:"processor"},{headerName:"Wireless",field:"wireless"},{headerName:"Graphics",field:"graphics"},{headerName:"Touchscreen?",field:"screen-supports-touch",width:70},{headerName:"Hard Drive",field:"hard-drive"},{headerName:"Memory",field:"memory"},{headerName:"Memory Soldered?",field:"memory-soldered",width:70},{headerName:"Processor Cache",field:"processor-cache",width:70},{headerName:"Battery",field:"battery"},{headerName:"Warranty",field:"warranty"},{headerName:"Operating System",field:"operating-system"},{headerName:"Original Price",field:"orig-price",width:70,cellRenderer:N(S(j(2))),filter:"agNumberColumnFilter"},{headerName:"Pointing Device",field:"pointing-device"},{headerName:"Part Number",field:"part-number"},{headerName:"Keyboard",field:"keyboard"},{headerName:"Bluetooth",field:"bluetooth",width:70}],defaultColDef:{sortable:!0,filter:!0,resizable:!0},suppressCellSelection:!0,enableCellTextSelection:!0,rowHeight:40,headerHeight:40};return r.a.createElement("div",{className:"ag-theme-balham-dark table-wrapper"},r.a.createElement(v.AgGridReact,{gridOptions:a,rowData:t,multiSortKey:"ctrl",onFirstDataRendered:function(e){return e.columnApi.autoSizeColumns()}}))},C=a(24),z=function(e){return r.a.createElement(C.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(C.a.Header,{closeButton:!0},r.a.createElement(C.a.Title,{id:"contained-modal-title-vcenter"},"About")),r.a.createElement(C.a.Body,null,r.a.createElement("p",null,"When I wanted to buy a refurbished ThinkPad, I used ",r.a.createElement("a",{href:"https://lw.ofwiz.com"},"lw.ofwiz"),", but found it lacking because I couldn't filter for specs important to me, such as screen resolution, screen size, and whether the ThinkPad ",r.a.createElement("a",{href:"https://www.reddit.com/r/thinkpad/"},"had an IPS screen"),"."),r.a.createElement("p",null,"So, I built logaze to watch laptop prices on Lenovo outlet. On this site, you can sort and filter on any column, on any field you are interested in. If that's not enough, download a csv dump of the data and work through that yourself!"),r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("img",{alt:"",src:"pouchie-bino.svg"})),r.a.createElement("small",null,"p.s. Thanks for loading this page! You're contributing to scraping Lenovo Outlet. (see faq)")),r.a.createElement(C.a.Footer,null,r.a.createElement("small",null,"Built with love by ",r.a.createElement("a",{href:"https://github.com/ackerleytng"},"ackerleytng")," in Clojure (",r.a.createElement("a",{href:"https://github.com/ackerleytng/logaze-scraper"},"scraper"),") and React (",r.a.createElement("a",{href:"https://github.com/ackerleytng/logaze"},"frontend"),")")," ",r.a.createElement(E.a,{onClick:e.onHide},"Close")))},I=function(e){return r.a.createElement(C.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(C.a.Header,{closeButton:!0},r.a.createElement(C.a.Title,{id:"contained-modal-title-vcenter"},"FAQ")),r.a.createElement(C.a.Body,null,r.a.createElement("dl",null,r.a.createElement("dt",null,"Why does Lenovo say there are 235 (big number) products found but you only show 160 (smaller)?"),r.a.createElement("dd",null,"Some of those are already out of stock, I filtered out anything that is out of stock.")),r.a.createElement("dl",null,r.a.createElement("dt",null,"How am I contributing to scraping Lenovo Outlet?"),r.a.createElement("dd",null,"Whenever you open this page, your browser will check when the last update was, and if the last scraping time was more than 4 hours ago, your browser will trigger the scraper automatically. Thank you for helping to trigger the scraping! (Nope, your computer is not being used to scrape Lenovo Outlet.)")),r.a.createElement("dl",null,r.a.createElement("dt",null,"What is your backend/scraper?"),r.a.createElement("dd",null,"My backend is technically just a json file; the scraper resides on heroku. The heroku free dyno sleeps if it does not receive any traffic for 30 mins, and it takes really long to wake up after sleeping, hence I decided to cache results in a json file for better UX.")),r.a.createElement("dl",null,r.a.createElement("dt",null,"How are you caching scraping results?"),r.a.createElement("dd",null,"I'm using ",r.a.createElement("a",{href:"https://jsonbin.io"},"jsonbin.io"),"! They are a really great service that is like pastebin, but for json. They have a nice API for updating bins, and they allow you to update the same bin with new data!")),r.a.createElement("dl",null,r.a.createElement("dt",null,"Is this insecure, since the data being served from jsonbin.io could be written to by anyone?"),r.a.createElement("dd",null,"Yes, this means that if someone writes to the bin at ",r.a.createElement("a",{href:"https://jsonbin.io"},"jsonbin.io"),", they could potentially use XSS on you. ",r.a.createElement("a",{href:"https://www.ag-grid.com"},"ag-grid")," was previously vulnerable to XSS (",r.a.createElement("a",{href:"https://github.com/ag-grid/ag-grid/issues/1961"},"#1961"),", ",r.a.createElement("a",{href:"https://github.com/ag-grid/ag-grid/issues/1287"},"#1287"),"), but that has since been ",r.a.createElement("a",{href:"https://github.com/dominikg/ag-grid/commit/28625a36bf5a3d98081f44ef73d548e0191dfc2a"},"fixed"),", by using ",r.a.createElement("code",null,".textContent")," to render cell contents. This prevents the data from being interpreted as html and protects clients from XSS.")),r.a.createElement("dl",null,r.a.createElement("dt",null,"Why not secure the bin at jsonbin.io?"),r.a.createElement("dd",null,"I wish ",r.a.createElement("a",{href:"https://jsonbin.io"},"jsonbin.io")," allowed users to protect bins from writes with a key, and yet allow public access to the bin. As I understand it, they do have private bins, but that means needing the same key for access. If I have to embed the key in the web client, we're back to square one in protecting the bin from unauthorized writes."))),r.a.createElement(C.a.Footer,null,r.a.createElement(E.a,{onClick:e.onHide},"Close")))},T=a(55),x=function(e){var t=e.beforeOnClose,a=e.beforeShow,n=e.afterOnClose,o=e.afterShow;return r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"relative"}},r.a.createElement("div",{style:{position:"absolute",top:0,right:0,zIndex:o||a?10:0}},r.a.createElement(T.a,{onClose:t,show:a,delay:3e3,autohide:!0},r.a.createElement(T.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"Scraper triggered!")),r.a.createElement(T.a.Body,null,"Scraper is starting up...")),r.a.createElement(T.a,{onClose:n,show:o,delay:3e3,autohide:!0},r.a.createElement(T.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"Scraping triggered!")),r.a.createElement(T.a.Body,null,"Wait a bit, and then refresh this page!"))))},H=function(){return m().then((function(e){return function(e,t){console.log({dldata:t});var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("logaze.csv",function(e){console.log({conv:e});var t=function(e,t){return null===t?"":t},a=Object.keys(e[0]),n=e.map((function(e){return a.map((function(a){return JSON.stringify(e[a],t)})).join(",")}));return n.unshift(a.join(",")),n.join("\r\n")}(e))}))},B=function(){var e=Object(d.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return t=e.sent,e.next=5,y();case 5:return a=e.sent,e.abrupt("return",!t.isValid()||!a.isValid()||t.isAfter(a.add(4,"hours")));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){m().then(r)}),[]),a}(),t=function(){var e=Object(n.useState)(p.a.invalid()),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){y().then(r)}),[]),a}(),a=t.isValid()?", last updated ".concat(t.fromNow()):"",o=Object(n.useState)(!1),i=Object(l.a)(o,2),c=i[0],f=i[1],g=Object(n.useState)(!1),E=Object(l.a)(g,2),v=E[0],k=E[1],j=Object(n.useState)(!1),N=Object(l.a)(j,2),S=N[0],C=N[1],T=Object(n.useState)(!1),P=Object(l.a)(T,2),A=P[0],D=P[1],F=function(){C(!0),fetch("https://logaze.herokuapp.com/").then((function(){return b().then(w)})).then((function(){return D(!0)}))};return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:if(!e.sent){e.next=4;break}F();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{beforeOnClose:function(){return C(!1)},beforeShow:S,afterOnClose:function(){return D(!1)},afterShow:A}),r.a.createElement(u.a,{expand:"sm",bg:"dark",variant:"dark"},r.a.createElement(u.a.Brand,{onClick:function(){return f(!0)}},r.a.createElement("img",{alt:"",src:"pouchie-bino-white-bg.svg",width:"30",height:"30",className:"d-inline-block align-top"})," ","logaze"),r.a.createElement(u.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(u.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(h.a,{className:"mr-auto"},r.a.createElement(h.a.Link,{href:"#",onClick:function(){return f(!0)}},"about"),r.a.createElement(h.a.Link,{href:"#",onClick:function(){return k(!0)}},"faq"),r.a.createElement(h.a.Link,{href:"#",onClick:function(){return F()}},"rescrape"),r.a.createElement(h.a.Link,{href:"#",onClick:H},"csv"),r.a.createElement(h.a.Link,{href:"https://github.com/ackerleytng/logaze/issues"},"issues?")),r.a.createElement(u.a.Text,null,r.a.createElement("small",null,e.length," laptops found",a)))),r.a.createElement(O,{data:e}),r.a.createElement(z,{show:c,onHide:function(){return f(!1)}}),r.a.createElement(I,{show:v,onHide:function(){return k(!1)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[203,1,2]]]);
//# sourceMappingURL=main.7f0c26bc.chunk.js.map